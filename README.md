# Clanker SDK

The official TypeScript SDK for deploying tokens using Clanker v3.1.4.

## Installation

```bash
npm install clanker-sdk viem dotenv
```

## Quick Start

1. Create a `.env` file with your configuration:
```env
PRIVATE_KEY=your_private_key_here
FACTORY_ADDRESS=clanker_factory_address_here
RPC_URL=your_rpc_url_here  # Optional
```

2. Create a deployment script:
```typescript
import { createWalletClient, http, parseEther } from 'viem';
import { privateKeyToAccount } from 'viem/accounts';
import { base } from 'viem/chains';
import { Clanker } from 'clanker-sdk';
import * as dotenv from 'dotenv';
import { randomBytes } from 'crypto';

// Load environment variables
dotenv.config();

const PRIVATE_KEY = process.env.PRIVATE_KEY;
const FACTORY_ADDRESS = process.env.FACTORY_ADDRESS;
const RPC_URL = process.env.RPC_URL;

if (!PRIVATE_KEY || !FACTORY_ADDRESS) {
  throw new Error('Missing required environment variables');
}

async function main(): Promise<void> {
  // Initialize wallet
  const account = privateKeyToAccount(`0x${PRIVATE_KEY}`);
  const transport = RPC_URL ? http(RPC_URL) : http();
  const wallet = createWalletClient({
    account,
    chain: base,
    transport
  });

  // Initialize Clanker SDK
  const clanker = new Clanker({
    wallet,
    factoryAddress: FACTORY_ADDRESS as `0x${string}`,
    chainId: base.id
  });

  try {
    const deployConfig = {
      tokenConfig: {
        name: 'Test Token',
        symbol: 'TEST',
        salt: `0x${randomBytes(32).toString('hex')}`,
        image: 'ipfs://your_image_hash',
        metadata: 'ipfs://your_metadata_hash',
        context: 'Your deployment context',
        originatingChainId: BigInt(8453) // Base chain ID
      },
      poolConfig: {
        pairedToken: '0x4200000000000000000000000000000000000006' as `0x${string}`, // WETH on Base
        initialMarketCapInPairedToken: parseEther('5') // 5 WETH initial mcap
      },
      vaultConfig: {
        vaultPercentage: 30, // 30% vault
        vaultDuration: BigInt(60 * 24 * 60 * 60) // 60 days vault duration
      },
      initialBuyConfig: {
        pairedTokenPoolFee: 10000, // 1% fee tier (fixed)
        pairedTokenSwapAmountOutMinimum: parseEther('0.001') // 0.001 WETH initial buy
      },
      rewardsConfig: {
        creatorReward: BigInt(40), // 40% creator reward
        creatorAdmin: account.address,
        creatorRewardRecipient: account.address,
        interfaceAdmin: account.address,
        interfaceRewardRecipient: account.address
      }
    } as const;

    const tokenAddress = await clanker.deploy(deployConfig);
    console.log('Token deployed successfully at:', tokenAddress);
  } catch (error) {
    if (error instanceof Error) {
      console.error('Deployment failed:', error.message);
    } else {
      console.error('Deployment failed with unknown error');
    }
    process.exit(1);
  }
}

main().catch((error) => {
  if (error instanceof Error) {
    console.error('Deployment failed:', error.message);
  } else {
    console.error('Deployment failed with unknown error');
  }
  process.exit(1);
});
```

## Configuration Options

### Token Configuration
- `name`: Token name
- `symbol`: Token symbol
- `salt`: Randomly generated bytes32 value
- `image`: IPFS hash for token image
- `metadata`: IPFS hash for token metadata
- `context`: Deployment context string
- `originatingChainId`: Chain ID where token is deployed (8453 for Base)

### Pool Configuration
- Pool fee tier is fixed at 1% (10000) for optimal performance
- Initial market cap in WETH (e.g., 5 WETH)
- Paired with WETH on Base (`0x4200000000000000000000000000000000000006`)

### Vault Configuration (Optional)
- `vaultPercentage`: Percentage of tokens to lock (0-100)
- `vaultDuration`: Duration of the lock in seconds (e.g., 60 days = 5184000 seconds)

### Initial Buy Configuration
- Pool fee tier is fixed at 1% (10000)
- Initial buy amount in WETH (e.g., 0.001 WETH)

### Rewards Configuration
- `creatorReward`: Percentage of rewards for creator (e.g., 40)
- Creator and interface admin/recipient addresses

## Important Notes

1. The pool fee tier is fixed at 1% (10000) for optimal performance
2. Initial market cap and buy amounts should be specified using `parseEther()`
3. Vault duration should be specified in seconds
4. All addresses should be properly formatted as `0x${string}`
5. Error handling is included for better debugging

## Examples

See the [examples](./examples) directory for more deployment scenarios.

## Development

```bash
# Install dependencies
npm install

# Build
npm run build

# Test
npm test
```

## License

MIT