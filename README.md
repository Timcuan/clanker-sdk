# Clanker SDK

The official TypeScript SDK for deploying tokens using Clanker.

## Installation

```bash
npm install clanker-sdk viem
# or
yarn add clanker-sdk viem
# or
pnpm add clanker-sdk viem
```

## Quick Start

1. Create a `.env` file with your configuration:
```env
PRIVATE_KEY=your_private_key_here
```

2. Create a deployment script:
```typescript
import { Clanker } from 'clanker-sdk';
import { createPublicClient, createWalletClient, http } from 'viem';
import { privateKeyToAccount } from 'viem/accounts';
import { base } from 'viem/chains';

// Initialize wallet with private key
const account = privateKeyToAccount('0x' + process.env.PRIVATE_KEY);

// Create transport with optional custom RPC
const transport = http();

const publicClient = createPublicClient({
  chain: base,
  transport,
});

const wallet = createWalletClient({
  account,
  chain: base,
  transport,
});

// Initialize Clanker SDK
const clanker = new Clanker({
  wallet,
  publicClient,
});

async function deployToken() {
  console.log("Starting token deployment...");

  // Deploy the token
  const tokenAddress = await clanker.deployToken({
    name: "Clanker Test Token",
    symbol: "TEST",
    image: "ipfs://bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi",
  });

  console.log("Token deployed successfully!");
  console.log("Token address:", tokenAddress);
}

deployToken().catch(console.error);
```

### Using with OnchainKit (Frontend)

For frontend applications using OnchainKit, you can use the `prepareDeployToken` method to get the transaction data without executing it:

```typescript
import { Clanker } from 'clanker-sdk';
import { createPublicClient, http } from 'viem';
import { base } from 'viem/chains';

// Initialize SDK without wallet for frontend use
const publicClient = createPublicClient({
  chain: base,
  transport: http(),
});

const clanker = new Clanker({
  publicClient,
});

// In your component/hook:
async function prepareTokenDeployment() {
  // Get transaction data
  const tx = await clanker.prepareDeployToken({
    name: "Clanker Test Token",
    symbol: "TEST",
    image: "ipfs://bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi",
  });

  // Use with OnchainKit
  return {
    to: tx.to,
    data: tx.data,
    value: tx.value, // For dev-buy (0 if none)
  };
}
```

## Configuration Options

### Basic Token Configuration
- `name`: Token name
- `symbol`: Token symbol
- `salt`: Randomly generated bytes32 value
- `image`: IPFS hash for token image
- `metadata`: IPFS hash for token metadata
- `context`: Deployment context string
- `originatingChainId`: Chain ID where token is deployed (8453 for Base)

### Advanced Configuration Options

For more advanced deployments, you can use additional configuration options as shown below:

```typescript
const tokenAddress = await clanker.deployToken({
  // Basic configuration (required)
  name: "Test Token",
  symbol: "TEST",
  
  // Metadata configuration
  metadata: {
    description: "Test token deployment",
    socialMediaUrls: [],
    auditUrls: [],
  },
  
  // Deployment context
  context: {
    interface: "Clanker SDK Test",
    platform: "Clanker",
    messageId: "Test Deploy",
    id: "TEST-1",
  },
  
  // Pool configuration with custom quote token
  pool: {
    quoteToken: "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913", // USDC on Base
    initialMarketCap: "100", // Note: For custom quote tokens, market cap should be >$100 USD for better routing
  },
  
  // Vesting configuration
  vault: {
    percentage: 10,        // 10% of tokens vested
    durationInDays: 30,    // 30-day vesting period
  },
  
  // Initial buy configuration
  devBuy: {
    ethAmount: "0.00001", // Initial buy amount in ETH
    maxSlippage: 5,       // Maximum 5% slippage
  },
});
```

### Pool Configuration
- Pool fee tier is fixed at 1% 
- Initial market cap in WETH (e.g., 10 WETH)
- Paired with WETH on Base (`0x4200000000000000000000000000000000000006`)
- Custom quote tokens supported (e.g., USDC)
  - **Important**: When using custom quote tokens, set initial market cap >$100 USD to ensure better routing options
  - Lower market caps may limit trading to direct quote token pairs only

### Vault Configuration
- `percentage`: Percentage of tokens to be vested
- `durationInDays`: Duration of the vesting period in days

### Dev Buy Configuration
- `ethAmount`: Amount of ETH for initial buy
- `maxSlippage`: Maximum allowed slippage percentage for the initial buy

## Examples

See the [examples](./examples) directory for more deployment scenarios.

## Development Methods

### `deployToken(config: SimpleTokenConfig): Promise<Address>`
Deploys a new token with the specified configuration. Requires a wallet to be configured.

### `prepareDeployToken(config: SimpleTokenConfig): Promise<PreparedDeployTx>`
Prepares the transaction data for deploying a token without executing it. Perfect for frontend integrations with OnchainKit or similar tools. Returns:
- `to`: Contract address to call
- `data`: Encoded calldata
- `value`: ETH value to send (for dev-buy, 0 if none)

## Development

```bash
# Install dependencies
npm install

# Build
npm run build

# Test
npm test
```

## License

MIT